<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sendai Winter Trip</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f0f4f8; /* 淺藍灰底色 */
            -webkit-tap-highlight-color: transparent;
        }
        /* 隱藏捲軸但保留功能 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* 頁首圓弧特效 */
        .header-curve {
            border-radius: 0 0 40px 40px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(148, 163, 184, 0.3);
        }
        /* 模擬手機 App 容器 */
        .app-container {
            max-width: 480px; /* 手機寬度 */
            margin: 0 auto;
            background-color: #F8FAFC;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.05);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        ice: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            800: '#075985',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body>

<div id="app" class="app-container">

    <header class="relative z-10">
        <div class="header-curve h-[250px] relative w-full bg-gray-200">
            <img src="Gemini_Generated_Image_r1q0nyr1q0nyr1q0.jpg" alt="Sendai Trip" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-ice-800/40 to-transparent"></div>
            
            <div class="absolute top-6 right-6 text-white text-shadow text-right">
                <p class="text-sm font-light tracking-widest mb-1">TOHOKU JAPAN</p>
                <h1 class="text-3xl font-bold tracking-wide">仙台冬日之旅</h1>
                <p class="text-xs opacity-90 mt-1">2025.01.24 - 01.30</p>
            </div>

            <div lass="absolute -bottom-2 right-4 flex gap-3 z-20">
                <button @click="currentTab = 'itinerary'" :class="tabClass('itinerary')" class="w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all transform hover:scale-105">
                    <i class="fas fa-map-marked-alt text-lg"></i>
                </button>
                <button @click="currentTab = 'info'" :class="tabClass('info')" class="w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all transform hover:scale-105">
                    <i class="fas fa-info text-lg"></i>
                </button>
                <button @click="currentTab = 'shopping'" :class="tabClass('shopping')" class="w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all transform hover:scale-105">
                    <i class="fas fa-shopping-basket text-lg"></i>
                </button>
                <button @click="currentTab = 'expenses'" :class="tabClass('expenses')" class="w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all transform hover:scale-105">
                    <i class="fas fa-calculator text-lg"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="relative z-0 -mt-6 pt-10 pb-20 px-4 min-h-[60vh]">
        
        <div v-if="currentTab === 'itinerary'" class="animate-fade-in">
            
            <div class="flex overflow-x-auto no-scrollbar gap-3 mb-6 pb-2">
                <div v-for="(day, index) in dates" :key="index" 
                     @click="selectedDateIndex = index"
                     :class="selectedDateIndex === index ? 'bg-ice-600 text-white shadow-md transform scale-105' : 'bg-white text-gray-500 shadow-sm'"
                     class="flex-shrink-0 flex flex-col items-center justify-center w-16 h-20 rounded-2xl transition-all duration-300 cursor-pointer border border-ice-100">
                    <span class="text-xs font-medium">{{ day.day }}</span>
                    <span class="text-xl font-bold mt-1">{{ day.date }}</span>
                </div>
            </div>

            <div class="bg-gradient-to-r from-ice-500 to-ice-400 rounded-2xl p-4 text-white shadow-lg mb-6 flex justify-between items-center relative overflow-hidden">
                <div class="relative z-10">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-snowflake text-2xl animate-pulse"></i>
                        <span class="text-3xl font-bold">{{ weatherData.temp }}°C</span>
                    </div>
                    <p class="text-sm opacity-90 mt-1">體感 {{ weatherData.feels }}°C | {{ weatherData.desc }}</p>
                </div>
                <div class="text-right relative z-10">
                    <p class="font-bold">Sendai</p>
                    <p class="text-xs opacity-80">Today</p>
                </div>
                <div class="absolute -right-4 -top-4 w-24 h-24 bg-white opacity-10 rounded-full"></div>
            </div>

            <div class="space-y-4">
                <div v-for="(item, index) in currentItinerary" :key="item.id" class="relative group">
                    
                    <div v-if="item.travelTimeBefore" class="flex items-center justify-center py-2 text-xs text-gray-400 gap-2">
                        <div class="h-8 w-[1px] bg-gray-300"></div>
                        <div class="bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2 shadow-sm">
                            <i :class="getTransportIcon(item.transportType)"></i>
                            <span>{{ item.travelTimeBefore }}</span>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl p-4 shadow-sm border-l-4 border-ice-500 hover:shadow-md transition-shadow relative overflow-hidden">
                        
                        <div class="absolute right-2 top-2 flex flex-col opacity-20 group-hover:opacity-100 transition-opacity">
                            <button @click="moveItem(index, -1)" v-if="index > 0" class="text-gray-400 hover:text-ice-600"><i class="fas fa-chevron-up"></i></button>
                            <button @click="moveItem(index, 1)" v-if="index < currentItinerary.length - 1" class="text-gray-400 hover:text-ice-600"><i class="fas fa-chevron-down"></i></button>
                        </div>

                        <div v-if="item.category === 'flight'" class="flex flex-col gap-2">
                            <div class="flex justify-between items-center text-ice-600 mb-1">
                                <span class="text-xs font-bold border border-ice-600 px-2 py-0.5 rounded">FLIGHT</span>
                                <span class="text-sm font-bold">{{ item.time }}</span>
                            </div>
                            <h3 class="font-bold text-gray-800 text-lg">{{ item.name }}</h3>
                            <div class="flex justify-between text-sm text-gray-500 mt-1">
                                <span>{{ item.details.from }}</span>
                                <i class="fas fa-plane text-ice-400"></i>
                                <span>{{ item.details.to }}</span>
                            </div>
                        </div>

                        <div v-else @click="openMap(item.name)" class="cursor-pointer">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <span :class="categoryClass(item.category)" class="text-[10px] font-bold px-2 py-0.5 rounded text-white mb-1 inline-block">
                                        {{ getCategoryLabel(item.category) }}
                                    </span>
                                    <h3 class="font-bold text-gray-800 text-lg leading-tight">{{ item.name }}</h3>
                                </div>
                                <span class="text-sm font-bold text-gray-500 bg-gray-50 px-2 py-1 rounded-lg">{{ item.time }}</span>
                            </div>
                            
                            <p v-if="item.note" class="text-xs text-gray-500 mt-1 line-clamp-2">
                                <i class="fas fa-comment-alt text-ice-300 mr-1"></i> {{ item.note }}
                            </p>
                            
                             <div class="flex gap-2 mt-3 text-xs">
                                <span v-if="item.ticket" class="bg-orange-50 text-orange-600 px-2 py-1 rounded">
                                    <i class="fas fa-ticket-alt mr-1"></i> {{ item.ticket }}
                                </span>
                                <span v-if="item.cost" class="bg-green-50 text-green-600 px-2 py-1 rounded">
                                    <i class="fas fa-yen-sign mr-1"></i> {{ item.cost }}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button @click="showAddModal = true" class="fixed bottom-6 right-6 w-14 h-14 bg-ice-600 text-white rounded-full shadow-xl flex items-center justify-center hover:bg-ice-700 transition-colors z-30">
                <i class="fas fa-plus text-xl"></i>
            </button>
        </div>

        <div v-if="currentTab === 'info'" class="space-y-6 animate-fade-in">
            <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
                <h3 class="font-bold text-gray-700 mb-4 border-b pb-2"><i class="fas fa-exchange-alt mr-2 text-ice-500"></i>匯率換算 (JPY to TWD)</h3>
                <div class="flex items-center gap-3">
                    <div class="flex-1">
                        <label class="text-xs text-gray-400 block mb-1">日幣 (JPY)</label>
                        <input type="number" v-model="currencyInput" class="w-full bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-lg font-bold text-gray-700 focus:outline-none focus:border-ice-500">
                    </div>
                    <i class="fas fa-arrow-right text-gray-300 mt-5"></i>
                    <div class="flex-1">
                        <label class="text-xs text-gray-400 block mb-1">台幣 (TWD)</label>
                        <div class="w-full bg-ice-50 border border-ice-100 rounded-lg px-3 py-2 text-lg font-bold text-ice-700">
                            {{ convertedCurrency }}
                        </div>
                    </div>
                </div>
                <p class="text-[10px] text-right text-gray-400 mt-2">匯率: 0.215 (預估)</p>
            </div>

            <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
                <h3 class="font-bold text-gray-700 mb-4 border-b pb-2"><i class="fas fa-bed mr-2 text-ice-500"></i>住宿資訊</h3>
                <div class="space-y-4">
                    <div v-for="hotel in hotels" class="bg-gray-50 p-3 rounded-xl">
                        <div class="flex justify-between items-start">
                            <h4 class="font-bold text-sm text-gray-800">{{ hotel.name }}</h4>
                            <a :href="'https://www.google.com/maps/search/?api=1&query=' + hotel.name" target="_blank" class="text-ice-500 text-xs"><i class="fas fa-location-arrow"></i> 導航</a>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">{{ hotel.dates }}</p>
                        <p class="text-xs text-gray-500">{{ hotel.note }}</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
                <h3 class="font-bold text-gray-700 mb-4 border-b pb-2"><i class="fas fa-car mr-2 text-ice-500"></i>租車資訊</h3>
                <div class="bg-gray-50 p-3 rounded-xl">
                    <h4 class="font-bold text-sm text-gray-800">Nippon Rent-a-car</h4>
                    <p class="text-xs text-gray-500 mt-1">取車: Sendai Station Terminal</p>
                    <p class="text-xs text-gray-500">還車: 1/30 16:30 MUST LEAVE</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Nippon+Rent-a-car+Sendai+Station" target="_blank" class="block mt-2 text-center bg-white border border-ice-200 text-ice-600 text-xs py-2 rounded-lg font-bold">導航至租車處</a>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
                <a href="tel:110" class="bg-red-50 p-4 rounded-xl flex flex-col items-center justify-center text-red-600 border border-red-100">
                    <i class="fas fa-user-shield text-2xl mb-2"></i>
                    <span class="font-bold text-sm">警察 110</span>
                </a>
                <a href="tel:119" class="bg-red-50 p-4 rounded-xl flex flex-col items-center justify-center text-red-600 border border-red-100">
                    <i class="fas fa-ambulance text-2xl mb-2"></i>
                    <span class="font-bold text-sm">救護 119</span>
                </a>
            </div>
        </div>

        <div v-if="currentTab === 'shopping'" class="space-y-4 animate-fade-in pb-16">
            <h2 class="font-bold text-gray-700 px-2">我的購物清單</h2>
            
            <div v-if="shoppingList.length === 0" class="text-center py-10 text-gray-400">
                <i class="fas fa-shopping-bag text-4xl mb-3 opacity-30"></i>
                <p>還沒有想買的東西嗎？</p>
            </div>

            <div v-for="(item, index) in shoppingList" :key="index" class="bg-white p-3 rounded-xl shadow-sm flex items-center gap-3">
                <div class="w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                    <img v-if="item.image" :src="item.image" class="w-full h-full object-cover">
                    <div v-else class="w-full h-full flex items-center justify-center text-gray-300"><i class="fas fa-image"></i></div>
                </div>
                <div class="flex-1">
                    <h4 class="font-bold text-gray-800">{{ item.name }}</h4>
                    <p class="text-xs text-gray-500">{{ item.note }}</p>
                </div>
                <button @click="removeShoppingItem(index)" class="text-red-300 hover:text-red-500 px-2"><i class="fas fa-trash"></i></button>
            </div>

            <button @click="showShoppingModal = true" class="fixed bottom-6 right-6 w-14 h-14 bg-ice-600 text-white rounded-full shadow-xl flex items-center justify-center hover:bg-ice-700 z-30">
                <i class="fas fa-plus text-xl"></i>
            </button>
        </div>

        <div v-if="currentTab === 'expenses'" class="animate-fade-in text-center py-10">
             <i class="fas fa-wallet text-4xl text-ice-300 mb-4"></i>
             <p class="text-gray-500">記帳功能開發中...</p>
        </div>

    </main>

    <div v-if="showAddModal" class="fixed inset-0 z-50 flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" @click="showAddModal = false"></div>
        <div class="bg-white rounded-3xl w-full max-w-sm p-6 relative z-10 shadow-2xl">
            <h3 class="text-xl font-bold text-gray-800 mb-4">新增行程</h3>
            <div class="space-y-3">
                <div>
                    <label class="text-xs font-bold text-gray-500">分類</label>
                    <select v-model="newItem.category" class="w-full bg-gray-50 border rounded-lg p-2 text-sm">
                        <option value="spot">景點</option>
                        <option value="food">美食</option>
                        <option value="shopping">購物</option>
                        <option value="hotel">住宿</option>
                        <option value="flight">航班</option>
                        <option value="other">其他</option>
                    </select>
                </div>
                <div>
                    <label class="text-xs font-bold text-gray-500">名稱</label>
                    <input v-model="newItem.name" type="text" class="w-full bg-gray-50 border rounded-lg p-2 text-sm">
                </div>
                <div class="grid grid-cols-2 gap-3">
                     <div>
                        <label class="text-xs font-bold text-gray-500">時間</label>
                        <input v-model="newItem.time" type="text" placeholder="ex: 14:00" class="w-full bg-gray-50 border rounded-lg p-2 text-sm">
                    </div>
                     <div>
                        <label class="text-xs font-bold text-gray-500">門票/預算</label>
                        <input v-model="newItem.cost" type="text" class="w-full bg-gray-50 border rounded-lg p-2 text-sm">
                    </div>
                </div>
                <div>
                    <label class="text-xs font-bold text-gray-500">備註</label>
                    <textarea v-model="newItem.note" rows="2" class="w-full bg-gray-50 border rounded-lg p-2 text-sm"></textarea>
                </div>
            </div>
            <div class="flex gap-3 mt-6">
                <button @click="showAddModal = false" class="flex-1 py-3 text-gray-500 font-bold bg-gray-100 rounded-xl">取消</button>
                <button @click="addItineraryItem" class="flex-1 py-3 text-white font-bold bg-ice-600 rounded-xl shadow-lg shadow-ice-200">確認新增</button>
            </div>
        </div>
    </div>

    <div v-if="showShoppingModal" class="fixed inset-0 z-50 flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" @click="showShoppingModal = false"></div>
        <div class="bg-white rounded-3xl w-full max-w-sm p-6 relative z-10 shadow-2xl">
            <h3 class="text-xl font-bold text-gray-800 mb-4">想買什麼？</h3>
            <div class="space-y-3">
                <input v-model="newShoppingItem.name" type="text" placeholder="商品名稱" class="w-full bg-gray-50 border rounded-lg p-3 text-sm">
                <input v-model="newShoppingItem.note" type="text" placeholder="備註 (哪裡買?)" class="w-full bg-gray-50 border rounded-lg p-3 text-sm">
                <label class="block w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-center text-gray-400 cursor-pointer hover:bg-gray-50">
                    <i class="fas fa-camera mb-1"></i><br><span class="text-xs">上傳照片</span>
                    <input type="file" @change="handleImageUpload" class="hidden" accept="image/*">
                </label>
                <div v-if="newShoppingItem.image" class="h-20 w-20 mx-auto rounded overflow-hidden">
                    <img :src="newShoppingItem.image" class="w-full h-full object-cover">
                </div>
            </div>
            <div class="mt-6">
                <button @click="addShoppingItem" class="w-full py-3 text-white font-bold bg-ice-600 rounded-xl shadow-lg">加入清單</button>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp, ref, computed, reactive, onMounted } = Vue;

    createApp({
        setup() {
            const currentTab = ref('itinerary');
            const selectedDateIndex = ref(0);
            const showAddModal = ref(false);
            const showShoppingModal = ref(false);
            const currencyInput = ref(1000);
            
            // 模擬天氣數據
            const weatherData = reactive({ temp: -2, feels: -5, desc: 'Snowing', icon: 'snow' });

            // 日期資料
            const dates = [
                { day: 'Sat', date: '24/1' },
                { day: 'Sun', date: '25/1' },
                { day: 'Mon', date: '26/1' },
                { day: 'Tue', date: '27/1' },
                { day: 'Wed', date: '28/1' },
                { day: 'Thu', date: '29/1' },
                { day: 'Fri', date: '30/1' }
            ];

            // 預設行程資料 (從您的 docx 解析)
            const itineraryData = reactive({
                0: [ // 24/1 Sat
                    { id: 1, category: 'flight', name: 'HK Express UO', time: '09:00', details: {from: 'HKG', to: 'SDJ'}, transportType: 'plane', travelTimeBefore: null },
                    { id: 2, category: 'other', name: '抵達仙台機場', time: '14:00', note: '入境手續', transportType: 'walk', travelTimeBefore: '5h 0m' },
                    { id: 3, category: 'other', name: 'Nippon Rent a Car', time: '15:00', note: '仙台機場取車 / 或搭車至仙台站取', transportType: 'train', travelTimeBefore: '30 min' },
                    { id: 4, category: 'food', name: '牛舌 閣 / 善治郎', time: '18:00', note: '牛舌刺身+牛舌粥', transportType: 'walk', travelTimeBefore: '10 min' },
                    { id: 5, category: 'hotel', name: '仙台華盛頓飯店', time: '20:00', note: 'Check-in', transportType: 'walk', travelTimeBefore: '10 min' }
                ],
                1: [ // 25/1 Sun
                    { id: 11, category: 'spot', name: '鹽斧水產市場', time: '09:30', note: '出名吞拿魚', transportType: 'car', travelTimeBefore: '30 min' },
                    { id: 12, category: 'spot', name: '鹽竈神社', time: '11:00', note: '', transportType: 'walk', travelTimeBefore: '15 min' },
                    { id: 13, category: 'spot', name: '藏王狐狸村', time: '14:00', note: '抱狐狸時段: 1100 & 1400', ticket: 'Ticket Needed', transportType: 'car', travelTimeBefore: '1h' },
                    { id: 14, category: 'hotel', name: '仙台大和魯內飯店', time: '18:00', note: 'Check-in', transportType: 'car', travelTimeBefore: '1h' }
                ],
                2: [ // 26/1 Mon
                    { id: 21, category: 'spot', name: '銀山溫泉', time: '12:00', note: '千與千尋場景，需泊大正浪漫館轉巴士', transportType: 'car', travelTimeBefore: '1.5h' },
                    { id: 22, category: 'spot', name: '銀山溫泉街', time: '16:00', note: '看開燈', transportType: 'walk', travelTimeBefore: '5 min' },
                    { id: 23, category: 'hotel', name: '天童溫泉 Tendo Hotel', time: '18:30', note: '一泊兩食', transportType: 'car', travelTimeBefore: '40 min' }
                ],
                3: [ // 27/1 Tue
                    { id: 31, category: 'spot', name: '藏王溫泉 (樹冰)', time: '09:00', note: '藏王纜車山麓線', ticket: '預購纜車票', transportType: 'car', travelTimeBefore: '45 min' },
                    { id: 32, category: 'spot', name: '山頂餐廳', time: '12:00', note: '睇景食飯', transportType: 'walk', travelTimeBefore: '20 min' },
                    { id: 33, category: 'spot', name: '米澤牛 登起波', time: '18:00', note: '山形店', transportType: 'car', travelTimeBefore: '30 min' }
                ],
                4: [ // 28/1 Wed
                    { id: 41, category: 'spot', name: '松島海岸', time: '10:00', note: '紅橋, 日本三景', transportType: 'car', travelTimeBefore: '1h' },
                    { id: 42, category: 'food', name: '松島 蒸蠔', time: '12:00', note: '任食蒸蠔', transportType: 'walk', travelTimeBefore: '5 min' },
                    { id: 43, category: 'spot', name: '仙台海洋森林水族館', time: '14:30', note: 'Optional', transportType: 'car', travelTimeBefore: '20 min' },
                     { id: 44, category: 'hotel', name: 'Azuma-so', time: '18:00', note: '', transportType: 'car', travelTimeBefore: '40 min' }
                ],
                5: [ // 29/1 Thu
                    { id: 51, category: 'spot', name: '山寺', time: '09:00', note: '需爬樓梯', transportType: 'car', travelTimeBefore: '30 min' },
                    { id: 52, category: 'food', name: '腰掛庵', time: '13:00', note: '著名和果子, 草莓大福必食', transportType: 'car', travelTimeBefore: '15 min' },
                    { id: 53, category: 'food', name: '平田牧場', time: '18:00', note: '吉烈豬排 (金華豬)', transportType: 'car', travelTimeBefore: '1h' }
                ],
                6: [ // 30/1 Fri
                    { id: 61, category: 'shopping', name: '仙台車站附近', time: '10:00', note: 'PARCO, LOFT, S-PAL', transportType: 'walk', travelTimeBefore: '10 min' },
                    { id: 62, category: 'other', name: '仙台還車', time: '12:30', note: '16:30 MUST LEAVE', transportType: 'car', travelTimeBefore: '10 min' },
                    { id: 63, category: 'flight', name: 'HK Express 回程', time: '14:55', details: {from: 'SDJ', to: 'HKG'}, transportType: 'train', travelTimeBefore: '30 min' }
                ]
            });

            // 住宿列表
            const hotels = [
                { name: '仙台華盛頓飯店', dates: '24/1', note: '仙台站附近' },
                { name: '仙台大和魯內飯店', dates: '25/1', note: 'Daiwa Roynet Hotel' },
                { name: '天童酒店 (Tendo Hotel)', dates: '26/1', note: '一泊兩食, 山形牛' },
                { name: 'Azuma-so', dates: '27/1-28/1', note: '溫泉旅館' }
            ];

            const shoppingList = reactive([
                { name: '毛豆奶昔', note: '仙台名產', image: '' },
                { name: '腰掛庵 草莓大福', note: '必買伴手禮', image: '' }
            ]);

            // 新增資料暫存
            const newItem = reactive({ category: 'spot', name: '', time: '', cost: '', note: '' });
            const newShoppingItem = reactive({ name: '', note: '', image: null });

            // Computed: 取得當前日期行程
            const currentItinerary = computed(() => {
                return itineraryData[selectedDateIndex.value] || [];
            });

            const convertedCurrency = computed(() => {
                return (currencyInput.value * 0.215).toFixed(0);
            });

            // 方法
            const tabClass = (tab) => {
                return currentTab.value === tab ? 'bg-ice-600 text-white' : 'bg-white text-ice-500';
            };

            const categoryClass = (cat) => {
                const map = {
                    spot: 'bg-red-400', food: 'bg-orange-400', shopping: 'bg-pink-400',
                    hotel: 'bg-indigo-400', flight: 'bg-blue-800', other: 'bg-gray-400'
                };
                return map[cat] || 'bg-gray-400';
            };

            const getCategoryLabel = (cat) => {
                const map = { spot: '景點', food: '美食', shopping: '購物', hotel: '住宿', flight: '航班', other: '其他' };
                return map[cat] || cat;
            };

            const getTransportIcon = (type) => {
                const map = { walk: 'fa-walking', car: 'fa-car', train: 'fa-train', plane: 'fa-plane' };
                return `fas ${map[type] || 'fa-arrow-down'}`;
            };

            const openMap = (keyword) => {
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(keyword)}`, '_blank');
            };

            const addItineraryItem = () => {
                if(!newItem.name) return;
                const list = itineraryData[selectedDateIndex.value];
                list.push({
                    id: Date.now(),
                    ...newItem,
                    transportType: 'car', // 預設
                    travelTimeBefore: '15 min' // 預設
                });
                showAddModal.value = false;
                // 重置
                newItem.name = ''; newItem.time = ''; newItem.note = '';
            };

            const moveItem = (index, direction) => {
                const list = itineraryData[selectedDateIndex.value];
                const temp = list[index];
                list[index] = list[index + direction];
                list[index + direction] = temp;
            };

            const handleImageUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        newShoppingItem.image = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            };

            const addShoppingItem = () => {
                if(!newShoppingItem.name) return;
                shoppingList.push({...newShoppingItem});
                showShoppingModal.value = false;
                newShoppingItem.name = ''; newShoppingItem.note = ''; newShoppingItem.image = null;
            };

            const removeShoppingItem = (index) => {
                shoppingList.splice(index, 1);
            };

            return {
                currentTab, dates, selectedDateIndex, itineraryData, currentItinerary,
                weatherData, hotels, shoppingList, showAddModal, showShoppingModal, newItem, newShoppingItem,
                currencyInput, convertedCurrency,
                tabClass, categoryClass, getCategoryLabel, getTransportIcon, openMap,
                addItineraryItem, moveItem, handleImageUpload, addShoppingItem, removeShoppingItem
            };
        }
    }).mount('#app');
</script>
</body>
</html>